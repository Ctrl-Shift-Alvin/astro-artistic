---
import Section from '@/components/astro-components/Section.astro';
import { AdminErrorsTable } from '@/components/partials/admin/AdminErrorsTable';
import { AdminBuildOverview } from '@/components/partials/admin/AdminBuildOverview';
import BaseAdmin from '@/templates/BaseAdmin.astro';

const { buildNumber = '-1' } = Astro.params;

let buildNumberInt;
try {

	buildNumberInt = parseInt(buildNumber);
	if (!buildNumberInt)
		throw new Error();

} catch {

	Astro.response.status = 400;
	Astro.response.statusText = 'bad-request';

}
---
<BaseAdmin
	head={{
		title: 'Submission ' + buildNumber,
		description: 'Seeing submission ' + buildNumber
	}}
>
	<Section center title={`Build ID '${buildNumber}' Overview`}>
		<AdminBuildOverview buildNumber={buildNumber} client:only="react" />
	</Section>
	<Section center title={`Errors`}>
		<AdminErrorsTable buildNumber={buildNumberInt} client:only="react" />
	</Section>
</BaseAdmin>
