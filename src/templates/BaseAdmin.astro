---
import { AdminButtonContainer } from '@/components/partials/admin/AdminButtonContainer';
import { GlobalTranslation } from '@/locales/global';
import Base from '@/templates/Base.astro';

interface Props {
	head: {
		title: string;
		description: string;
	};
	noLogoutComponent?: boolean;
}

const { head } = Astro.props;

const title = `${GlobalTranslation.siteName} - Admin - ${head.title}`;
const description = `${GlobalTranslation.siteName} - Admin - ${head.description}`;

---

<Base
	head={{
		title,
		description
	}}
>

	<slot />
	<AdminButtonContainer client:only="react" />

	<script>

		import { addAdminButton } from '@/components/partials/admin/AdminButtonContainer';
		import {
			gotoPrevOrHome,
			logout,
			setLogoutTimeout
		} from '@/frontend/adminApi';

		setLogoutTimeout();

		if (location.pathname !== '/admin/home/') {
			addAdminButton({
				children: 'Back',
				onClick: () => {

					gotoPrevOrHome();

				}
			});
		}

		addAdminButton({
			children: 'Logout',
			onClick: () => {

				logout();

			}
		});

	</script>
</Base>
